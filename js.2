<script>
// On Page Load Logic
document.addEventListener("DOMContentLoaded", async function() {
    const userLocation = await getLocation();

    // Load Algolia Results to the Grid
    loadAlgoliaResultsToDiv(userLocation.lat, userLocation.lng);

    // Display Results on the Map
    displayMapWithResults(userLocation.lat, userLocation.lng);

    // Checkbox Styling
    initializeCheckboxStyling();

    // Listen to Filter Form Submission
    document.getElementById('filterForm').addEventListener('submit', (event) => {
        event.preventDefault();
        updateURLWithFilters();
        console.log("Filter form submitted and URL updated.");
        displayMapWithResults(userLocation.lat, userLocation.lng);
    
    // Hide the modal with ID "filterForm"
    document.getElementById('filterForm').style.display = 'none';
    });

    // Check and Preset Filters from URL Params
    checkAndPresetFilters();
});
</script>

<script>
console.log("Mapbox Location Searchbox Script Initiated");

// Set Mapbox Access Token
mapboxgl.accessToken = 'pk.eyJ1IjoibWFnbnVzMTk5MyIsImEiOiJjbGwyOHUxZTcyYTc1M2VwZDhzZGY3bG13In0._jM6tBke0CyM5_udTKGDOQ';

// Create Geocoder
var geocoder = new MapboxGeocoder({
    accessToken: mapboxgl.accessToken,
    // Set options if needed
});

// Add Geocoder to the input field with id 'current_location'
document.getElementById('current_location').appendChild(geocoder.onAdd());

// Optional: Handle the selection event
geocoder.on('result', function(e) {
    console.log(e.result); // Log the selected address details
});
</script>
